@{
    ViewData["Title"] = "Data Masking Report";
}
<!-- A navegation bar which does not navigate, it only shows the chosen database name along with a button that
    allows the user to go to the corresponding page to change it, if needed and show the current page (receiving the functionality selected from the controller)-->
<nav class="navbar nav_color">
    <div id="Top-container">
        <div id="Top">
            <span class='database_icon'></span>
            <span class="top-text">@ViewData["database"]</span>
            <button type="button" onclick='window.location.href="DatabaseConnection"' class="btn btn-default" data-toggle="tooltip" data-placement="auto" title="Change database"><span class='folder_icon'></span></button>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="MainPage" MainPage">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Create Masks</li>
            </ol>
        </div>
    </div>
</nav>
<!-- This part is the most complicated of this view
    It gets the data sent from the controller (double array with the database table names and column names of each table)
    Then it creates for each table an item of an accordion which when expanded shows its columns with checkboxes for all of those items-->
<div id="middle_container" class="left-half">
    <div id="selection-top" class="centeredBig">
        <h3>
            <span>Data Masking Report</span>
        </h3>
    </div>
    <div id="accordion" class="overflow-auto left-half" style="width:15vw;">
        @foreach (var table in ViewBag.selected)
        {
            string collapse = "#collapse" + table[0];
            <div class="card nav_color">
                <div class="card-header" id="@table[0]">
                    <h5>
                        <button class="btn btn-link" data-toggle="collapse" data-target="@collapse" aria-expanded="true" aria-controls="collapseOne">
                            @table[0]
                        </button>
                    </h5>
                </div>

                <div id="@collapse.Substring(1)" class="collapse hide" aria-labelledby="@table[0]" data-parent="#accordion">
                    <div class="card-body">
                        @for (int i = 1; i < ((string[])table).Length; i++)
                        {
                            <button class="btn btn-link" onclick="openTab(event, '@table[i]')">@table[i]</button>
                            <br />
                        }
                    </div>
                </div>

            </div>
        }
    </div>
    <div id="Tab-contents" class="overflow-auto">
        @foreach (string[] table in ViewBag.selected)
        {
            for (int i = 1; i < table.Length; i++)
            {
                <div id="@table[i]" class="tabcontent" style="display: none;">
                    <table class="table table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">@table[i]</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">1</th>
                                <td>Mark</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            }
        }
    </div>
</div>
<!-- This part is perform whole actions like selecting everything or nothing and running the functionality with the selected items -->
<div id="controls">
    @using (Html.BeginForm("GoToPageAfterCreate", "Home"))
    {
        <input type="text" id="functionalitySelected4" name="functionalitySelected" />
        <input id="hidden-btn5" class="hidden-btn" type="submit" style="display: none;" />
    }
    <br />
    <span id="selection-text">None selected</span>
    <div id="controls-inside">
        <button type="button" onclick='goToPageAfterCreate("@TempData["functionalitySelected"]")' class="btn btn-outline-primary">Confirm and run</button>
    </div>
</div>